<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>How dependency guessing works - Mere Code</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    <!-- Open Graph tags -->
            <meta property="og:type" content="article"/>
            <meta property="og:title" content="How dependency guessing works"/>
            <meta property="og:url" content="http://code.mumak.net/2011/08/how-dependency-guessing-works.html"/>
            <meta property="og:description" content="Although in my last post I talked about our proof of concept tool, I didn't actually explain how to use it. That's mostly because it's not quite ready to be used by others. There's a good reason. The most interesting thing that pkgme-binary does is to ..."/>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://code.mumak.net/theme/css/bootstrap.yeti.min.css" type="text/css"/>
    <link href="http://code.mumak.net/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://code.mumak.net/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="http://code.mumak.net/theme/css/style.css" type="text/css"/>

        <link href="http://code.mumak.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Mere Code ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://code.mumak.net/" class="navbar-brand">
Mere Code            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://code.mumak.net/blog/archives/"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://code.mumak.net/2011/08/how-dependency-guessing-works.html"
                       rel="bookmark"
                       title="Permalink to How dependency guessing works">
                        How dependency guessing works
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2011-08-18T12:18:00"> Thu 18 August 2011</time>
    </span>



    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Although in my <a href="http://code.mumak.net/2011/08/automagic-packaging-of-binary-apps-for.html">last
post</a>
I talked about our proof of concept tool, I didn't actually explain how
to use it. That's mostly because it's not quite ready to be used by
others. There's a good reason.  </p>
<p>The most interesting thing that
<a href="https://code.launchpad.net/~jml/+junk/pkgme-binary">pkgme-binary</a> does
is to guess the dependencies of an application given only its tarball.
The way it does this is by finding all of the ELF objects (executables,
shared libraries etc.), reading the symbols from them, and figuring out
the packages based on those.  </p>
<p>Canny readers are already thinking, "Yes, that is what dpkg-shlibdeps
does" â€“ which is true. As some background, Debian packages that export
symbols for linking also provide explicit metadata about those symbols
and what versions they appear in, in order to allow Debian packagers to
figure out dependencies easily using dpkg-shlibdeps. Fascinating reading
can be found in the <a href="http://www.debian.org/doc/debian-policy/ch-sharedlibs.html">Debian policy
manual</a>, a
<a href="http://wiki.debian.org/Projects/ImprovedDpkgShlibdeps">spec on improving
dpkg-shlibdeps</a>
and <a href="http://wiki.debian.org/UsingSymbolsFiles">the guide on using the new symbol
files</a>.  </p>
<p>Unfortunately, dpkg-shlibdeps can only query packages that are installed
on your system. If you have a binary with symbols that are not provided
by any library on your system, you cannot use it to calculate
dependencies. Debian (or the Debian flavour of your choosing) might have
a perfectly good package to satisfy that dependency, but you won't be
able to find it.  </p>
<p>So, to do dependency guessing properly, you need to have a database
mapping symbols back to packages. Debian already has something like this
in its <a href="http://qa.debian.org/cgi-bin/mole/seedsymbols/">mole database</a>.
Ubuntu doesn't have anything like this that I know about.  </p>
<p>Assembling and maintaining such a database is pretty much a simple
matter of programming, but it's still work that I wanted to avoid for
the proof-of-concept. Instead, I used the mole database in Debian for
the calculations. That means we'll get wrong answers for Ubuntu, but it
demonstrates that the concept works.  </p>
<p>Since I have a copy of that mole database locally, and since it's about
1.5GB, I'm not distributing it with the branch. Which means that the
<a href="https://code.launchpad.net/~jml/+junk/pkgme-binary">automagic binary packaging
branch</a> won't
actually work for you.  </p>
            </div>
            <!-- /.entry-content -->

        </article>
    </section>

        </div>
        <div class="col-sm-3 well well-sm" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">



                <li class="list-group-item"><a href="http://code.mumak.net/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                    <ul class="list-group" id="tags">
                        <li class="list-group-item tag-1">
                            <a href="http://code.mumak.net/tag/uncategorized.html">
                                Uncategorized
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://code.mumak.net/tag/launchpad.html">
                                launchpad
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://code.mumak.net/tag/bazaar.html">
                                Bazaar
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://code.mumak.net/tag/hacking.html">
                                Hacking
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://code.mumak.net/tag/testtools.html">
                                testtools
                            </a>
                        </li>
                        <li class="list-group-item tag-3">
                            <a href="http://code.mumak.net/tag/testing.html">
                                Testing
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://code.mumak.net/tag/launchpad-subunit-data.html">
                                launchpad subunit data
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://code.mumak.net/tag/subunit-data.html">
                                subunit data
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://code.mumak.net/tag/twisted.html">
                                Twisted
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://code.mumak.net/tag/pelican.html">
                                pelican
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://code.mumak.net/tag/ui.html">
                                UI
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://code.mumak.net/tag/personal.html">
                                Personal
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://code.mumak.net/tag/blog.html">
                                blog
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://code.mumak.net/tag/ubuntu.html">
                                ubuntu
                            </a>
                        </li>
                    </ul>
                </li>    

        </ul>
    </section>

</aside>        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2014 Jonathan M. Lange
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="//code.jquery.com/jquery.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://code.mumak.net/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://code.mumak.net/theme/js/respond.min.js"></script>

</body>
</html>